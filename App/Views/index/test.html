{extend name="public/base"}
{block name="extend_css"}
<style>
    .input-group-addon{
        line-height: 0.7rem;
    }
</style>
{/block}

{block name="content"}
<div class="animated fadeIn">

    <form action="{:url('admin/index/data')}" method="get">

        <div class="row" style="margin-bottom: 10px;">
            <div class="col-lg-2">
                <div class="input-group-append">
                    <input type="text" class="form-control datetimepicker-input" style="width:184px;" id="start"
                           name="start" placeholder="拉新日期-开始" />
                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
            </div>
            <div class="col-lg-2">
                <div class="input-group-append">
                    <input type="text" class="form-control datetimepicker-input" style="width:184px;" id="end"
                           name="end" placeholder="拉新日期-结束" />
                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
            </div>


            <div class="col-lg-2">
                <div class="input-group-append">
                    <input type="text" class="form-control datetimepicker-input" style="width:184px;" id="act_start"
                           name="act_start" placeholder="行为日期-开始" />
                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
            </div>
            <div class="col-lg-2">
                <div class="input-group-append">
                    <input type="text" class="form-control datetimepicker-input" style="width:184px;" id="act_end"
                           name="act_end" placeholder="行为日期-结束" />
                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-lg-3">
                <div class="input-group">
                    <span class="input-group-addon">设备</span>
                    <select name="device[]" data-placeholder="点击选择设备" multiple class="standardSelect">
                        <option value="web">WEB</option>
                        <option value="app">APP</option>
                    </select>
                </div>
            </div>

            <div class="form-group col-lg-3">
                <div class="input-group">
                    <span class="input-group-addon">地区</span>
                    <select name="country[]" data-placeholder="点击选择地区" multiple class="standardSelect">
                        {foreach $country as $v}
                        <option value="{$v.name}">{$v.name}</option>
                        {/foreach}
                    </select>
                </div>
            </div>

            <div class="form-group col-lg-3">
                <div class="input-group">
                    <span class="input-group-addon">渠道地区</span>
                    <select name="channel_country[]" data-placeholder="点击选择渠道地区" multiple class="standardSelect">
                        {foreach $country as $v}
                        <option value="{$v.code}">{$v.code}</option>
                        {/foreach}
                    </select>
                </div>
            </div>

            <div class="form-group col-lg-3">
                <div class="input-group">
                    <span class="input-group-addon">渠道</span>
                    <select name="channel[]" data-placeholder="点击选择渠道" multiple class="standardSelect">
                        {foreach $channel_option as $v}
                        <option value="{$v}">{$v}</option>
                        {/foreach}
                        <option value="ziran">自然量（非广告渠道）</option>
                    </select>
                </div>
            </div>
            <div class="form-group col-lg-3">
                <div class="input-group">
                    <span class="input-group-addon">系统</span>
                    <select name="system[]" data-placeholder="点击选择系统" multiple class="standardSelect">
                        <option value="iOS">APP-IOS</option>
                        <option value="android">APP-Android</option>
                        <option value="pc">Web-pc</option>
                        <option value="mobile">Web-mobile</option>
                    </select>
                </div>
            </div>
            <div class="form-group col-lg-3">
                <div class="input-group">
                    <span class="input-group-addon">campaign</span>
                    <select name="campaign[]" data-placeholder="点击选择campaign" multiple class="standardSelect">
                        {foreach $campaign_option as $v}
                        <option value="{$v}">{$v}</option>
                        {/foreach}
                    </select>
                </div>
            </div>
            <div class="form-group col-lg-3">
                <div class="input-group">
                    <span class="input-group-addon">adset</span>
                    <select name="adset[]" data-placeholder="点击选择adset" multiple class="standardSelect">
                        {foreach $adset_option as $v}
                        <option value="{$v}">{$v}</option>
                        {/foreach}
                    </select>
                </div>
            </div>
            <div class="form-group col-lg-3">
                <div class="input-group">
                    <div class="input-group">
                        <span class="input-group-addon">ad</span>
                        <select name="ad[]" data-placeholder="点击选择ad" multiple class="standardSelect">
                            {foreach $ad_option as $v}
                            <option value="{$v}">{$v}</option>
                            {/foreach}
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-group col-lg-3">
                <div class="input-group">
                    <div class="input-group">
                        <span class="input-group-addon">分组</span>
                        <select name="ad[]" data-placeholder="点击选择分组" multiple class="standardSelect">
                            {foreach $ad_option as $v}
                            <option value="{$v}">{$v}</option>
                            {/foreach}
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group col-lg-3">
                <div class="input-group">
                    <div class="input-group">
                        <span class="input-group-addon">content</span>
                        <input class="form-control" name="content" type="text" value="">
                    </div>
                </div>
            </div>
            <div class="form-group col-lg-3">
                <div class="alert alert-success" role="alert">
                    当前AUD->USD汇率：{$rate}
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group col-lg-6">
                <div class="input-group">
                    <span class="input-group-addon" style="width: 130px;">第一分组项</span>
                    <div class="form-check-inline form-check">
                        <label for="inline-radio1" class="form-check-label ">
                            <input type="radio" id="inline-radio1" name="first_group" value="country"
                                   class="form-check-input">地区
                        </label>
                        <label for="inline-radio2" class="form-check-label ">
                            <input type="radio" id="inline-radio2" name="first_group" value="channel"
                                   class="form-check-input">渠道
                        </label>
                        <label for="inline-radio3" class="form-check-label ">
                            <input type="radio" id="inline-radio3" name="first_group" value="device"
                                   class="form-check-input">设备
                        </label>
                        <label for="inline-radio3" class="form-check-label ">
                            <input type="radio" id="inline-radio4" name="first_group" value="system"
                                   class="form-check-input">系统
                        </label>
                        <label for="inline-radio3" class="form-check-label ">
                            <input type="radio" id="inline-radio5" name="first_group" value="campaign"
                                   class="form-check-input">campaign
                        </label>
                        <label for="inline-radio6" class="form-check-label ">
                            <input type="radio" id="inline-radio6" name="first_group" value="channel_country"
                                   class="form-check-input">渠道地区
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group col-lg-6">
                <div class="input-group">
                    <span class="input-group-addon" style="width: 130px;">第二分组项</span>
                    <div class="form-check-inline form-check">
                        <label for="inline-radio1" class="form-check-label ">
                            <input type="radio" id="inline-radio6" name="twice_group" value="country"
                                   class="form-check-input">地区
                        </label>
                        <label for="inline-radio2" class="form-check-label ">
                            <input type="radio" id="inline-radio7" name="twice_group" value="channel"
                                   class="form-check-input">渠道
                        </label>
                        <label for="inline-radio3" class="form-check-label ">
                            <input type="radio" id="inline-radio8" name="twice_group" value="device"
                                   class="form-check-input">设备
                        </label>
                        <label for="inline-radio3" class="form-check-label ">
                            <input type="radio" id="inline-radio9" name="twice_group" value="system"
                                   class="form-check-input">系统
                        </label>
                        <label for="inline-radio3" class="form-check-label ">
                            <input type="radio" id="inline-radio10" name="twice_group" value="campaign"
                                   class="form-check-input">campaign

                            <input class="form-control" id="is_export" name="is_export" type="hidden" value="0">
                        </label>
                        <label for="inline-radio1" class="form-check-label ">
                            <input type="radio" id="inline-radio6" name="twice_group" value="channel_country"
                                   class="form-check-input">渠道地区
                        </label>
                    </div>
                </div>
            </div>
        </div>



        <div class="row" style="padding: 20px 0;">
            <div class="col-lg-5 col-md">
                <button type="submit" id="submit" class="btn btn-primary">查询</button>
                <!--
                <a href="{:url('admin/banner/bannerAdd')}" target="_blank">
                    <button type="button" class="btn btn-secondary" target="_blank">添加</button>
                </a>
                -->
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button type="button" id="export_but" class="btn btn-primary">导出</button>

            </div>
        </div>
</div>

</form>
<div class="row">

    <div class="col-lg-12">
        <div class="card">
            <div class="card-header">
                <strong class="card-title">数据列表</strong>
            </div>
            <div class="card-body table-responsive">
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                    <tr>
                        {foreach $title as $v}
                        <th scope="col">{$v}</th>
                        {/foreach}
                    </tr>
                    </thead>
                    <tbody>



                    {switch group_deep}
                    {case 1}

                    {foreach $sum_data as $a_k => $a}
                    <tr>
                        <td>{$a_k}</td>

                        <!--
                        {foreach $a as $cloumn}
                        <td>{$cloumn}</td>
                        {/foreach}-->
                        {volist name="$a" id="vo" offset="0" length='11'}
                        <td>{$vo}</td>
                        {/volist}

                    </tr>
                    {/foreach}

                    {/case}
                    {case 2}

                    {foreach $sum_data as $a_k => $a}
                    {foreach $a as $b_k => $b}
                    <tr>
                        <td>{$a_k}</td>
                        <td>{$b_k}</td>

                        <!--
                        {foreach $b as $clou_k => $cloumn}
                        <td>{$cloumn}</td>
                        {/foreach}-->
                        {volist name="$b" id="vo" offset="0" length='11'}
                        <td>{$vo}</td>
                        {/volist}


                    </tr>
                    {/foreach}
                    {/foreach}

                    {/case}
                    {case 3}
                    {foreach $sum_data as $a_k => $a}
                    {foreach $a as $b_k => $b}
                    {foreach $b as $c_k => $c}

                    <tr>

                        <td>{$a_k}</td>
                        <td>{$b_k}</td>
                        <td>{$c_k}</td>

                        <!--
                        {foreach $c as $cloumn}
                        <td>{$cloumn}</td>
                        {/foreach}
                        -->
                        {volist name="$c" id="vo" offset="0" length='11'}
                        <td>{$vo}</td>
                        {/volist}

                    </tr>

                    {/foreach}
                    {/foreach}
                    {/foreach}
                    {/case}
                    {/switch}


                    {notempty name="gather_data"}
                    <tr>
                        {foreach $gather_data as $v}
                        <td>{$v}</td>
                        {/foreach}

                    </tr>
                    {/notempty}



                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


</div>
<!--- 内容-->
{/block}


{block name="extend_js"}
<script>
    jQuery(document).ready(function() {
        jQuery(".standardSelect").chosen({
            disable_search_threshold: 10,
            no_results_text: "Oops, nothing found!",
            width: "70%",
            placeholder_text_single: '选择',
            allow_single_deselect:true,
            no_results_text: "没有找到结果！",
        });
    });


    $('#export_but').click(function(){
        $('#is_export').val(1);
        $('#submit').click();
    });


    laydate.render({
        elem: '#start', //指定元素
        type: 'datetime',
        // value:'{present name="where.start"}{$where.start}{/present}'
    });

    laydate.render({
        elem: '#end', //指定元素
        type: 'datetime',
        //  value:'{present name="where.end"}{$where.end}{/present}'
    });

    laydate.render({
        elem: '#act_start', //指定元素
        type: 'datetime',
        //  value:'{present name="where.act_start"}{$where.act_start}{/present}'
    });

    laydate.render({
        elem: '#act_end', //指定元素
        type: 'datetime',
        //   value:'{present name="where.act_end"}{$where.act_end}{/present}'
    });
</script>
{/block}